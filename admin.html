<!DOCTYPE html>
<html>
<head>
<title>Product Table</title>
<style>

  body{
    background-color: orange;
  }
  table {
  border-collapse: collapse;
  width: 100%;
  background-color: yellow
}

th, td {
  border: 1px solid black;
  padding: 8px;
  text-align: left;
}
</style>
</head>
<body>

<h2>CUENTAS DIARIAS</h2>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Product</th>
      <th>P1</th>
      <th>P2</th>
      <th>P3</th>
      <th>Total</th>
    </tr>
  </thead>
  <tbody id="productTableBody">
    </tbody>
</table>

<br>

<textarea id="grandTotalTextArea" readonly></textarea>

<br>
<br>

<button onclick="calculateTotal()">Calculate Total</button>
<button onclick="calculateSum()">Calculate Sum</button>
<button onclick="calculateAverage()">Calculate Average</button>

<br><br>

<textarea id="sumOutput" rows="4" cols="50" readonly></textarea>
<br>
<textarea id="averageOutput" rows="4" cols="50" readonly></textarea><button onclick="saveTable()">Save Table</button>

<script>
  // Initialize table with 3 rows
  const productTableBody = document.getElementById('productTableBody');
  for (let i = 0; i < 3; i++) {
    addRow();
  }

  // Function to add a new row to the table
  function addRow() {
    const newRow = productTableBody.insertRow();

    // Date cell
    const dateCell = newRow.insertCell();
    const dateInput = document.createElement('input');
    dateInput.type = 'date';
    dateCell.appendChild(dateInput);

    // Product cell
    const productCell = newRow.insertCell();
    const productInput = document.createElement('input');
    productInput.type = 'text';
    productCell.appendChild(productInput);

    // P1, P2, P3 cells (editable)
    for (let i = 1; i <= 3; i++) {
      const cell = newRow.insertCell();
      const input = document.createElement('input');
      input.type = 'number';
      input.addEventListener('input', calculateRowTotal); // Calculate total on input change
      cell.appendChild(input);
    }

    // Total cell (not editable)
    const totalCell = newRow.insertCell();
    totalCell.textContent = '0'; // Initial total
  }

  // Function to calculate the total for a row
  function calculateRowTotal(event) {
    const row = event.target.parentNode.parentNode; // Get the row of the changed input
    const p1 = parseFloat(row.cells[2].querySelector('input').value) || 0;
    const p2 = parseFloat(row.cells[3].querySelector('input').value) || 0;
    const p3 = parseFloat(row.cells[4].querySelector('input').value) || 0;
    const total = (p1 + p2) * p3;
    row.cells[5].textContent = total.toFixed(2); // Update total cell

    calculateGrandTotal(); // Recalculate grand total
  }

  // Function to calculate the grand total
  function calculateGrandTotal() {
    let grandTotal = 0;
    const rows = productTableBody.querySelectorAll('tr');
    rows.forEach(row => {
      grandTotal += parseFloat(row.cells[5].textContent);
    });
    document.getElementById('grandTotalTextArea').value = grandTotal.toFixed(2);
  }

  

</script>

</body>
</html>
